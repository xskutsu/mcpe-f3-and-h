import{system,world}from"@minecraft/server";let LoreHeader="\n§r§bF3&H Data";function removeItemInfo(e){let t=!1;var n=e.getLore(),o=n.indexOf(LoreHeader);return-1!==o&&(n.splice(o,n.length-o),t=!0),t&&e.setLore(n),{changed:t,itemStack:e}}system.runInterval(function(){for(var e of world.getAllPlayers()){var t=e.getComponent("inventory");if(void 0!==t&&void 0!==t.container){for(let e=0;e<t.container.size;e++){var n=t.container.getItem(e);void 0!==n&&(n=removeItemInfo(n)).changed&&t.container.setItem(e,n.itemStack)}var o,i=e.getComponent("equippable");for(o of["Head","Chest","Legs","Feet"]){var a=i.getEquipment(o);void 0!==a&&(a=removeItemInfo(a)).changed&&i.setEquipment(o,a.itemStack)}e.isSneaking||void 0!==(e=i.getEquipment("Offhand"))&&(e=removeItemInfo(e)).changed&&i.setEquipment("Offhand",e.itemStack)}}},10),world.afterEvents.entitySpawn.subscribe(function(e){var t;"minecraft:item"===e.entity.typeId&&e.entity.hasComponent("item")&&(t=removeItemInfo(e.entity.getComponent("item").itemStack)).changed&&(e.entity.dimension.spawnItem(t.itemStack,e.entity.location),e.entity.remove())}),world.afterEvents.playerInteractWithBlock.subscribe(function(e){var t=e.block.getComponent("inventory");if(void 0!==t&&void 0!==t.container)for(let e=0;e<t.container.size;e++){var n=t.container.getItem(e);void 0!==n&&(n=removeItemInfo(n)).changed&&t.container.setItem(e,n.itemStack)}});let disabledWarningShown=!1;world.afterEvents.playerSpawn.subscribe(function(e){disabledWarningShown||(system.runTimeout(function(){e.player.sendMessage(`§cNote: You are in F3&H Deactivation mode.
§7This is used to remove transformations made by this addon.
§7To use this correctly, keep this addon enabled until you can confirm all items have been untransformed to there normal state. This means open all containers, inventories, etc.

§aIf you enabled this by mistake, change the behavior pack settings to activation mode.`)},40),disabledWarningShown=!0)});